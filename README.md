# Описание API

#### CreateInvoice – создает Счет (Счет на оплату покупателю).

Параметры:
- Data – тип InvoiceData – описывает минимально необходимый набор данных для заполнения документов.
- DateInvoice – тип dateTime – дата счета.
- CustomerID – UUID – идентификатор контрагента
- ContractID – UUID – идентификатор договора контрагента.
- IncludesVAT – boolean – True – НДС включается в цену, False – НДС сверху.
- Services – Services – массив описаний услуг.
- ID – UUID – идентификатор номенклатуры. Необязательное поле.
- Name – string – описание услуг.
- Quantity – decimal – количество
- Price – decimal – цена
- VATRate – VATRate – ставка НДС

Возвращаемое значение:
- DocumentRef – ссылка-идентификатор созданного документа.


#### UpdateDocuments – обновляет документ по указанному идентификатору.

Параметры:
- DocumentRef – тип DocumentRef – объект описывающий ссылку-идентификатор документа Счет. Для выполнения операции достаточно заполнить поле ID.
- Data – тип InvoiceData – описывает минимально необходимый набор данных для заполнения документа.

Возвращаемое значение:
- DocumentRef – ссылка-идентификатор обновленного документа.

#### CreateDocuments – создает набор документов Счет (Счет на оплату покупателю), Счет фактура (Счет-фактура выданный), Акт (Реализация товаров и услуг).

Параметры:
- Data – тип InvoiceData – описывает минимально необходимый набор данных для заполнения документов.
- DateInvoice – тип dateTime – дата счета.
- DateAct – тип dateTime – дата акта.
- DateInvoiceFacture – тип dateTime – дата счета-фактуры.
- CustomerID – UUID – идентификатор контрагента
- ContractID – UUID – идентификатор договора контрагента.
- IncludesVAT – boolean – True – НДС включается в цену, False – НДС сверху.
- Services – Services – массив описаний услуг.
- ID – UUID – идентификатор номенклатуры. Необязательное поле.
- Name – string – описание услуг.
- Quantity – decimal – количество
- Price – decimal – цена
- VATRate – VATRate – ставка НДС

Возвращаемое значение:
- DocumentsRef – ссылки-идентификаторы созданных документов.


#### UpdateDocuments – обновляет документы по указанным идентификаторам.

Параметры:
- DocumentsRef – тип DocumentsRef – объект описывающий ссылки-идентификаторы для документов Счет, Счет-фактура, Акт. Для выполнения операции достаточно заполнить поле ID.
- Data – тип InvoiceData – описывает минимально необходимый набор данных для заполнения документов.

Возвращаемое значение:
- DocumentsRef – ссылки-идентификаторы созданных документов.


#### RemoveDocuments – удаляет или помечает на удаление документы по переданным идентификаторам. Непосредственное удаление выполняется только если пройден контроль ссылочной целостности, иначе будет выдано исключение.

Параметры:
- DocumentsRef – тип DocumentsRef – объект описывающий ссылки-идентификаторы для документов Счет, Счет-фактура, Акт. Для выполнения операции достаточно заполнить поле ID. Для выборочного удаления необходимо заполнить идентификаторы только тех документов, которые необходимо удалить.
- SetDeletionMark – тип boolean – True – устанавливает пометку для удаления, False – удаляет непосредственно из БД.

Возвращаемое значение:
- boolean – успехное выполнение операции.


#### PrintDocuments – возвращает печатные формы документов в виде файлов PDF по переданным идентификаторам.

Параметры:
- DocumentsRef – тип DocumentsRef – объект описывающий ссылки-идентификаторы для документов Счет, Счет-фактура, Акт. Для выполнения операции достаточно заполнить поле ID. Для выборочного печати необходимо заполнить идентификаторы только тех документов, которые необходимо напечатать.
- Stamp – тип boolean – True – в печатные формы включаются печать и подпись, False – без подписи и печати.

Возвращаемое значение:
- Documents – объект, в полях которого содержаться соответствующие файлы печатных форм.


#### FindDocuments – выполняет поиск документов по указанным параметрам. 

Параметры:
- SearchOptions – тип SearchOptions:
- CustomerID – UUID – идентификатор контрагента
- ContractID – UUID – идентификатор договора контрагента. Может не указываться. В этом случае сверка будет проведена без учета договоров.
- Services – Services – аналогично CreateDocuments.
Поиск выполняет по И для всех полей.

Возвращаемое значение:
- DocumentsRefCollection – массив DocumentRef – объектов ссылок на найденные документы.


#### PrintReconciliationAct – возвращает печатную форму акта сверки взаиморасчетов в виде файла PDF. 

Параметры:
- Data – тип ReconciliationActData:
- BeginPeriod – dateTime – начало периода сверки.
- EndPeriod – dateTime – конец периода сверки
- CustomerID – UUID – идентификатор контрагента
- ContractID – UUID – идентификатор договора контрагента. Может не указываться. В этом случае сверка будет проведена без учета договоров.
- Date – dateTime – дата документа. Если указана, будет заполнена текущей датой.
По полям BeginPeriod, EndPeriod, CustomerID, ContractID выполняется поиск уже созданного документа. При отрицательном результате поиска будет создан новый документ.

- Stamp – тип boolean – True – в печатную форму включается печать и подпись, False – без подписи и печати.

Возвращаемое значение:
- base64Binary – файл печатной формы в PDF.


#### CreateContractor – создает контрагента по указанным данным. 

Параметры:
Contractor – тип Contractor:
- ID – UUID – Идентификатор контрагента. При создании нового не заполняется.
- INN – string – ИНН
- KPP – string – КПП. Для ИП необязательное.
- Name – string – краткое наименование организации.
- FullName – string – полное наименование организации.
- Parent – string – папка, к которой храниться контрагент. Задается в виде представлений подпапок разделенных ‘/’. Например, «БарДепозит/Покупатели». Если папка отсутствует, то она будет создана.
- Contact – массив контактных лиц
- Name – string – наименование
- Post – string – должность
- LegalAddress – юридический адрес
- ActualAddress – фактический адрес
- PostalAddress – почтовый адрес
- Account – массив банковских счетов
- CurrentAcc – расчетный счет
- CorrAcc – корсчет
- Bank – наименование банка
- RCBIC – БИК банка
- DeletionMark – признак пометки на удаления

- DuplicationControl – тип boolean – True – контролируется уникальность ИНН/КПП, False – уникальность не контролируется.

Возвращаемое значение:
- UUID – идентификатор созданного контрагента.


#### GetContractor – возвращает данные контрагента по его идентификатору. 

Параметры:
- ContractorID – UUID – Идентификатор контрагента

Возвращаемое значение:
- Contractor – объект описывающий данные контрагента.


#### UpdateContractor – создает контрагента по указанным данным. 

Параметры:
- Contractor – тип Contractor – см. CreateContractor

- DuplicationControl – тип boolean – True – контролируется уникальность ИНН/КПП, False – уникальность не контролируется.

Возвращаемое значение:
- boolean – успешность выполнения операции.


#### RemoveContractor – удаляет или помечает на удаление контрагента по переданным идентификаторам. Непосредственное удаление выполняется только если пройден контроль ссылочной целостности, иначе будет выдано исключение. 

Параметры:
- ContractorID – UUID – Идентификатор контрагента

- SetDeletionMark – тип boolean – True – устанавливает пометку для удаления, False – удаляет непосредственно из БД.

Возвращаемое значение:
- boolean – успешность выполнения операции.


#### FindContractor – осуществляет поиск контрагентов по ИНН/КПП. 

Параметры:
- INN – string – ИНН
- KPP – string – КПП. Для ИП необязательное.

Возвращаемое значение:
- ContractorCollection – массив данных контрагентов.


#### CreateContract– создает договор контрагента по указанным данным. 

Параметры:
- Contract – тип Contract:
- ID – UUID – идентификатор договора. При создании нового не заполняется.
- ContractorID – UUID – идентификатор контрагента.
- Name – string – наименование договора, представление. Если не указано, то будет заполнено на основании даты и номера.
- Number – string – номер договора.
- Date – dateTime – дата договора.
- EndDate – dateTime – окончание действия договора
- Type - ContractType – тип договора. Если не заполнен, то указывается СПокупателем.
- DeletionMark – признак пометки на удаления

Возвращаемое значение:
- UUID – идентификатор созданного договора.


#### GetContract – возвращает данные договора по его идентификатору. 

Параметры:
- ContractID – UUID – идентификатор договора

Возвращаемое значение:
- Contract – объект описывающий данные договора.


#### UpdateContract – обновляет данные договора. 

Параметры:
- Contract – тип Contract – см. CreateContract

Возвращаемое значение:
- boolean – успешность выполнения операции.


#### RemoveContract – удаляет или помечает на удаление договор по переданным идентификаторам. Непосредственное удаление выполняется только если пройден контроль ссылочной целостности, иначе будет выдано исключение. 

Параметры:
- ContractID – UUID – идентификатор договора

- SetDeletionMark – тип boolean – True – устанавливает пометку для удаления, False – удаляет непосредственно из БД.

Возвращаемое значение:
- boolean – успешность выполнения операции.


#### FindContract – возвращает все договоры контрагента. 

Параметры:
- ContractorID – UUID – идентификатор контрагента.

Возвращаемое значение:
- ContractCollection – массив данных договоров.
